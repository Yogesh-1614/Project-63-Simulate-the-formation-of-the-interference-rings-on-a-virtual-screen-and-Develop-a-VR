<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Newton's Rings – Virtual Interference Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --accent: #22c55e;
      --text: #e5e7eb;
      --muted: #9ca3af;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background: linear-gradient(135deg, #020617, #0f172a);
      color: var(--text);
    }

    header {
      padding: 16px 24px;
      background: rgba(2,6,23,0.8);
      border-bottom: 1px solid #1f2933;
    }

    header h1 {
      margin: 0;
      font-size: 1.4rem;
      font-weight: 600;
    }

    header p {
      margin: 4px 0 0;
      font-size: 0.9rem;
      color: var(--muted);
    }

    main {
      display: grid;
      grid-template-columns: 320px 1fr;
      gap: 16px;
      padding: 16px;
    }

    .panel {
      background: var(--panel);
      border: 1px solid #1f2933;
      border-radius: 12px;
      padding: 16px;
    }

    .panel h2 {
      margin-top: 0;
      font-size: 1.1rem;
      border-bottom: 1px solid #1f2933;
      padding-bottom: 6px;
    }

    label {
      display: block;
      font-size: 0.85rem;
      margin-top: 10px;
      color: var(--muted);
    }

    input {
      width: 100%;
      margin-top: 4px;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #1f2933;
      background: #020617;
      color: var(--text);
    }

    button {
      margin-top: 14px;
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: none;
      background: var(--accent);
      color: #022c22;
      font-weight: 600;
      cursor: pointer;
    }

    button:hover { filter: brightness(1.05); }

    .result {
      margin-top: 12px;
      font-size: 0.9rem;
      padding: 10px;
      background: #020617;
      border-radius: 8px;
      border: 1px solid #1f2933;
    }

    canvas {
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, #000000, #020617);
      border-radius: 12px;
      border: 1px solid #1f2933;
    }

    footer {
      text-align: center;
      padding: 10px;
      font-size: 0.8rem;
      color: var(--muted);
    }

    @media (max-width: 900px) {
      main { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

<header>
  <h1>Newton's Rings – Virtual Interference Simulation</h1>
  <p>Simulate interference rings and calculate wavelength using student inputs</p>
</header>

<main>
  <!-- Control Panel -->
  <div class="panel">
    <h2>Student Measurements</h2>

    <label>Radius of nth dark ring (r, meters)</label>
    <input id="radius" type="number" step="0.000001" value="0.002" />

    <label>Order of ring (n)</label>
    <input id="order" type="number" step="1" value="5" />

    <label>Radius of curvature of lens (R, meters)</label>
    <input id="curvature" type="number" step="0.01" value="1" />

    <button onclick="calculateWavelength()">Calculate Wavelength</button>

    <div id="output" class="result">
      Wavelength will be displayed here.
    </div>

    <h2 style="margin-top:16px;">Simulation Controls</h2>

    <label>Wavelength for simulation (nm)</label>
    <input id="simLambda" type="number" value="589" />

    <label>Ring contrast</label>
    <input id="contrast" type="number" step="0.1" value="1.0" />

    <button onclick="drawRings()">Update Simulation</button>
  </div>

  <!-- Canvas Panel -->
  <div class="panel">
    <canvas id="ringsCanvas" width="800" height="800"></canvas>
  </div>
</main>

<footer>
  Physics Virtual Lab – Newton's Rings (HTML, CSS, JavaScript)
</footer>

<script>
  const canvas = document.getElementById('ringsCanvas');
  const ctx = canvas.getContext('2d');

  function calculateWavelength() {
    const r = parseFloat(document.getElementById('radius').value);
    const n = parseInt(document.getElementById('order').value);
    const R = parseFloat(document.getElementById('curvature').value);

    if (r <= 0 || n <= 0 || R <= 0) {
      document.getElementById('output').innerText = 'Please enter valid positive values.';
      return;
    }

    // Newton's Rings formula for dark rings: r^2 = n * λ * R
    const lambda = (r * r) / (n * R);
    const lambdaNm = lambda * 1e9;

    document.getElementById('output').innerHTML =
      `<strong>Calculated Wavelength:</strong><br>${lambdaNm.toFixed(2)} nm`;
  }

  function drawRings() {
    const lambdaNm = parseFloat(document.getElementById('simLambda').value);
    const contrast = parseFloat(document.getElementById('contrast').value);

    const lambda = lambdaNm * 1e-9;
    const R = 1; // assumed curvature for visualization

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const cx = canvas.width / 2;
    const cy = canvas.height / 2;
    const maxR = Math.min(cx, cy);

    for (let r = 0; r < maxR; r++) {
      const physR = r / maxR * 0.01; // scale to meters
      const phase = (physR * physR) / (lambda * R);
      const intensity = Math.cos(Math.PI * phase) ** 2;

      const brightness = Math.min(255, Math.max(0, intensity * 255 * contrast));
      ctx.strokeStyle = `rgb(${brightness}, ${brightness}, ${brightness})`;
      ctx.beginPath();
      ctx.arc(cx, cy, r, 0, 2 * Math.PI);
      ctx.stroke();
    }
  }

  // Initial render
  drawRings();
</script>

</body>
</html>
